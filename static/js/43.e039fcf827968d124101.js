webpackJsonp([43],{"2OqJ":function(t,i){},"8mL6":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("2Hch"),a=e("Au9i"),c={name:"certification",data:function(){return{address:{receiver:"",phone:"",provinceOrDirectCity:"",cityOrArea:"",detail:"",defaultAddr:!1},userName:"",idCard:"",idCardImg:"",idCardImgBack:"",frontImg:"",backImg:"",startflag:!1,successflag:!1}},created:function(){if(this.$route.query.content){var t=this.$route.query.content;this.userName=t.realName,this.idCard=t.idNo,this.address.provinceOrDirectCity=t.province,this.address.cityOrArea=t.city}else this.userName="",this.idCard="",this.address.provinceOrDirectCity="",this.address.cityOrArea=""},methods:{ImgClick:function(t,i){function e(t,i){var e=new FileReader,s=new Image,a=function(){var t=document.getElementById("canvas");if(!t){var i=document.createElement("canvas");i.setAttribute("id","canvas"),i.setAttribute("style","display:none;"),document.body.appendChild(i),t=document.getElementById("canvas")}return t}(),c=a.getContext("2d");e.onload=function(){var t=this.result;s.onload=function(){var t=function(t,i,e){var s={},a=0,c=0;return i<=t&&e<=t?s={width:i,height:e}:(i>=e?(a=t,c=Math.ceil(t*e/i)):(c=t,a=Math.ceil(t*i/e)),s={width:a,height:c}),s}(350,this.width,this.height);a.width=t.width,a.height=t.height,c.drawImage(s,0,0,t.width,t.height);var e=a.toDataURL("image/jpeg");c.clearRect(0,0,t.width,t.height),i(e)},s.src=t},e.readAsDataURL(t)}var s=this,a=document.getElementById("fileInput"),c=document.getElementById("fileInput1"),n=document.getElementsByClassName("thisImg")[0],r=document.getElementsByClassName("thisImg")[1],o=a.files[0],d=c.files[0];"zheng"==i&&e(o,function(t){var i=t;n.src=i,s.idCardImg=i}),"fan"==i&&e(d,function(t){var i=t;r.src=i,s.idCardImgBack=i})},InfoSubmit:function(){if(""==this.address.provinceOrDirectCity||""==this.address.cityOrArea)return this.$router.push("/certification"),void Object(a.Toast)(this.$t("m.certification.message1"));if(!this.userName)return this.$router.push("/certification"),void Object(a.Toast)(this.$t("m.certification.message1"));if(!this.idCard)return this.$router.push("/certification"),void Object(a.Toast)(this.$t("m.certification.message1"));if(this.idCardImg)if(this.idCardImgBack){var t=this;a.Indicator.open(),t.$axios.post("/fhUser/submitIdVerifyInfo",{userId:t.$store.state.userId,sktSessionId:t.$store.state.sessionId,province:t.address.provinceOrDirectCity,city:t.address.cityOrArea,realName:t.userName,idNo:t.idCard,idPic:t.idCardImg,idPicBack:t.idCardImgBack}).then(function(i){a.Indicator.close(),i.data.ok?t.successflag=!0:(t.successflag=!1,Object(a.Toast)(i.data.msg))})}else Object(a.Toast)(this.$t("m.certification.message5"));else Object(a.Toast)(this.$t("m.certification.message4"))},back:function(){var t=this;this.$router.go(-1),this.$router.beforeEach(function(i,e,s){t.$store.commit("changePage",i.fullPath),s()})}},components:{commonHead:s.a}},n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"certification"},[e("common-head",{attrs:{title:t.$t("m.certification.title1")}}),t._v(" "),e("div",{staticClass:"back",on:{click:t.back}},[e("i",{staticClass:"iconfont icon-jiantou_xiangzuo"})]),t._v(" "),e("div",{staticClass:"certificationContent"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.successflag,expression:"!successflag"}],staticClass:"prompt"},[t._v("\n      "+t._s(t.$t("m.certification.prompt3"))+"\n    ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.successflag,expression:"!successflag"}],staticClass:"certificationBox"},[e("div",{staticClass:"certificationIpt clearfix"},[e("p",{staticClass:"addImg  fl  positive",on:{click:function(i){t.sheetVisible=!0}}},[t._m(0),t._v(" "),e("input",{ref:"cameraInput",attrs:{type:"file",accept:"image/*",id:"fileInput"},on:{change:function(i){t.ImgClick(i,"zheng")}}}),t._v(" "),e("img",{staticClass:"thisImg",attrs:{src:t.idCardImg,alt:""}})]),t._v(" "),e("p",{staticClass:"fr prompts"},[t._v(t._s(t.$t("m.certification.prompt1")))])]),t._v(" "),e("div",{staticClass:"certificationIpt clearfix"},[e("p",{staticClass:"addImg  fl negative",on:{click:function(i){t.sheetVisible=!0}}},[t._m(1),t._v(" "),e("input",{ref:"cameraInput",attrs:{type:"file",accept:"image/*",id:"fileInput1"},on:{change:function(i){t.ImgClick(i,"fan")}}}),t._v(" "),e("img",{staticClass:"thisImg",attrs:{src:t.idCardImgBack,alt:""}})]),t._v(" "),e("p",{staticClass:"fr prompts"},[t._v(t._s(t.$t("m.certification.prompt2")))])]),t._v(" "),e("p",{staticClass:"certificationBtn",on:{click:t.InfoSubmit}},[t._v(t._s(t.$t("m.certification.btn1")))])]),t._v(" "),e("div",{staticClass:"one"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.successflag,expression:"successflag"}],staticClass:"success"},[t._m(2),t._v(" "),e("p",[t._v(t._s(t.$t("m.certification.btn2")))])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"photo"},[i("i",{staticClass:"iconfont icon-xiangji"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"photo"},[i("i",{staticClass:"iconfont icon-xiangji"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"suss clearfix"},[i("i",{staticClass:"iconfont icon-renzheng fl"})])}]},r=e("VU/8")(c,n,!1,function(t){e("2OqJ")},"data-v-6545b2f4",null);i.default=r.exports}});