webpackJsonp([7],{"2ODL":function(t,e){},XVVb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),n=s("2Hch"),c=s("Au9i"),l={name:"pay",data:function(){return{payMoney:!1,closePay:!0,close:!1,payment:!1,payWay:!1,paymentName:2,cancelFlag:!1,overtime:!1,sellItem:{},sellItemWay:[],payMessage:"",secs:0,time:"",c2cCancelTimes:"",cancelnumber:!1,stime:"",cancelCount:0,list:[],bank:{},bao:{},wechat:{}}},computed:{token:function(){return this.$store.state.token},orderNotice:function(){return this.$store.state.TimeOut},releaseNotice:function(){return this.$store.state.BuyerConfirm}},watch:{orderNotice:{handler:function(t){t==this.sellItem.orderId&&(this.closePay=!1,this.cancelFlag=!1,this.payment=!1,this.overtime=!0,clearInterval(this.time),this.secs=0)}},releaseNotice:{handler:function(t){if(t==this.sellItem.orderId){Object(c.Toast)(this.$t("m.pay.message3"));var e=3,s=this;this.releaseTime=setInterval(function(){--e<=0&&(clearInterval(s.releaseTime),s.$router.push("/sellrelease"))},1e3)}}},token:{handler:function(t){t&&this.getList()},deep:!0}},created:function(){var t=this;this.sellItem=JSON.parse(this.getSess("sellItem")),this.sellItemWay=this.sellItem.payway,clearInterval(t.time),t.$store.commit("socketSend",{act:"fwC2c_getConfig",fn:function(e){t.c2cCancelTimes=e.c2cCancelTimes,t.c2cCancelTimes>0?t.cancelnumber=!0:t.cancelnumber=!1;var s=60*e.c2cWaitingMinutes;if(JSON.parse(t.getSess("sellItem")).createAt){var a=JSON.parse(t.getSess("sellItem")).createAt.replace(new RegExp("-","gm"),"/");a=new Date(a).getTime();var i=e.now.replace(new RegExp("-","gm"),"/");i=new Date(i).getTime(),t.stime=t.Subtr(i,a)/1e3,t.secs=s-t.stime}else t.secs=s;t.secs<=0?(t.zhong=!1,t.secs=0):(t.zhong=!0,t.time=setInterval(function(){--t.secs<=0&&clearInterval(t.time)},1e3))}}),this.token&&this.getList()},mounted:function(){for(var t,e=document.getElementsByTagName("img"),s=document.getElementById("imga"),a=0;t=e[a];a++)t.addEventListener("touchstart",function(){var t=setTimeout(function(){clearInterval(t),s.setAttribute("download","test.jpg");var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),s.dispatchEvent(e),s.removeAttribute("download")},3e3)},!1)},methods:{getList:function(){var t=this;t.$axios.get("/fhPayKind/myList",{params:{userId:t.$store.state.userId,sktSessionId:t.$store.state.sessionId}}).then(function(e){if(e.data.ok){t.list=e.data.list;for(var s=0;s<t.list.length;s++)"Bao"==t.list[s].type?t.bao=t.list[s]:"Bank"==t.list[s].type?t.bank=t.list[s]:"Wechat"==t.list[s].type&&(t.wechat=t.list[s])}else t.bank={},t.bao={},t.wechat={}})},copys:function(t){this.copy(t)},look:function(t){this.payment=!0,this.payMessage=t.qrImg},timeover:function(){this.sellItem.status="Timeout",this.setSess({sellItem:i()(this.sellItem)}),this.$router.push("/cancelSell")},cancelSure:function(){if(0==++this.cancelCount)this.cancelFlag=!0;else{var t=this;c.Indicator.open(),t.$store.commit("socketSend",{act:"fwC2c_cancel",data:{id:t.sellItem.orderId},fn:function(e){c.Indicator.close(),e.ok?(clearInterval(t.time),Object(c.Toast)(e.msg),t.$store.commit("changePage","/c2c"),t.$router.push("/c2c")):Object(c.Toast)(e.msg)}})}},dealSure:function(){var t=this;c.Indicator.open(),t.$store.commit("socketSend",{act:"fwC2c_buyerConfirm",data:{id:t.sellItem.orderId},fn:function(e){c.Indicator.close(),e.ok?(clearInterval(t.time),t.$router.push("/release")):Object(c.Toast)(e.msg)}})}},components:{commonHead:n.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay"},[s("common-head",{attrs:{title:t.$t("m.pay.sell")+t.sellItem.coinType}}),t._v(" "),s("div",{staticClass:"payContent"},[s("div",{staticClass:"cancel"},[t._v(t._s(t.$t("m.pay.ltime"))+" "+t._s(t._f("toTime")(t.secs))+" "+t._s(t.$t("m.pay.p18")))]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"order"},[s("div",{staticClass:"title clearfix"},[s("span",{staticClass:"name fl"},[t._v(t._s(t.$t("m.pay.title5")))]),s("span",{staticClass:"time fr"},[t._v(t._s(t.$t("m.pay.ltime"))+" "+t._s(t._f("toTime")(t.secs)))])]),t._v(" "),s("ul",[s("li",[t._v(t._s(t.$t("m.pay.reference"))+" :\n            "),s("span",{attrs:{id:"order"}},[t._v(t._s(t.sellItem.refNo))]),t._v(" "),s("i",{staticClass:"iconfont icon-fuzhi1 copy",on:{click:function(e){t.copys("order")}}})]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"fl"},[t._v(t._s(t.$t("m.pay.price")))]),s("span",{staticClass:"fr"},[t._v(t._s(t._f("moneyFil")(t.sellItem.price))+" CNY/"+t._s(t.sellItem.coinType))])]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"fl"},[t._v(t._s(t.$t("m.pay.count")))]),s("span",{staticClass:"fr"},[t._v(t._s(t._f("numFil")(t.sellItem.dealcount,2))+" "+t._s(t.sellItem.coinType))])]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"fl"},[t._v(t._s(t.$t("m.pay.total")))]),s("span",{staticClass:"fr"},[t._v(t._s(t._f("moneyFil")(t.sellItem.price*t.sellItem.dealcount))+" CNY")])]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"fl"},[t._v(t._s(t.$t("m.pay.time")))]),s("span",{staticClass:"fr"},[t._v(t._s(t.sellItem.createAt))])])])]),t._v(" "),s("div",{staticClass:"payway"},[s("p",{staticClass:"title"},[t._v(t._s(t.$t("m.pay.payee")))]),t._v(" "),s("ul",{staticClass:"con"},[s("li",{directives:[{name:"show",rawName:"v-show",value:t.bank.no,expression:"bank.no"}]},[s("p",{staticClass:"name"},[s("i",{staticClass:"iconfont icon-yinhangqia3 fl bank"}),t._v(" "),s("span",[t._v(t._s(t.$t("m.pay.bankCard")))]),t._v(" "),s("i",{staticClass:"iconfont icon-fuzhi1 copy",on:{click:function(e){t.copys(t.bank.no)}}})]),t._v(" "),s("div",{attrs:{id:t.bank.no}},[s("p",{staticClass:"msg"},[t._v(t._s(t.$t("m.pay.bankname"))+"："+t._s(t.bank.no))]),t._v(" "),s("p",{staticClass:"msg"},[t._v(t._s(t.$t("m.pay.bank"))+"："+t._s(t.bank.bank))]),t._v(" "),s("p",{staticClass:"msg"},[t._v(t._s(t.$t("m.pay.name"))+"："+t._s(t.bank.realName))])])])])]),t._v(" "),s("div",{staticClass:"prompt"},[s("p",{staticClass:"title"},[t._v(t._s(t.$t("m.pay.p12")))]),t._v(" "),s("p",{staticClass:"con"},[t._v("1."+t._s(t.$t("m.pay.p17")))]),t._v(" "),s("p",{staticClass:"con"},[t._v("2."+t._s(t.$t("m.pay.p14")))])]),t._v(" "),s("div",{staticClass:"btns",staticStyle:{"text-align":"center"}},[s("button",[t._v(t._s(t.$t("m.pay.title5")))])])])]),t._v(" "),s("div",{staticClass:"payMoney"},[s("mt-popup",{attrs:{"popup-transition":"popup-fade",closeOnClickModal:!1},model:{value:t.closePay,callback:function(e){t.closePay=e},expression:"closePay"}},[s("div",{staticClass:"closeCon"},[s("p",{staticClass:"title"},[t._v(t._s(t.$t("m.pay.p3"))+"：")]),t._v(" "),s("i",{staticClass:"iconfont icon-cuohao-copy",on:{click:function(e){t.closePay=!1}}}),t._v(" "),s("div",{staticClass:"con"},[t._v(t._s(t.$t("m.pay.p16")))])])]),t._v(" "),s("mt-popup",{attrs:{"popup-transition":"popup-fade",closeOnClickModal:t.close},model:{value:t.overtime,callback:function(e){t.overtime=e},expression:"overtime"}},[s("div",{staticClass:"overtime"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("m.pay.timeout")))]),t._v(" "),s("div",{staticClass:"sure"},[s("button",{on:{click:t.timeover}},[t._v(t._s(t.$t("m.pay.confirm1")))])])])]),t._v(" "),s("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.payment,callback:function(e){t.payment=e},expression:"payment"}},[s("div",{staticClass:"paymentCon"},[s("a",{attrs:{href:t.payMessage,id:"imga"}},[s("img",{attrs:{src:t.payMessage}})])])])],1)],1)},staticRenderFns:[]},r=s("VU/8")(l,o,!1,function(t){s("2ODL"),s("yZ9B"),s("qvGp")},"data-v-79b92c98",null);e.default=r.exports},qvGp:function(t,e){},yZ9B:function(t,e){}});