webpackJsonp([15],{"2sj4":function(e,t){},G7tS:function(e,t){},O83H:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Au9i"),i={name:"weixin",data:function(){return{actions:[{name:"拍照",method:this.ImgUpload},{name:"从相册选择",method:this.ImgUpload}],sheetVisible:!1,sfTestFlag:!1,userName:"",WX:"",qrCode:"",moneyPwd:"",successflag:!1,deteleId:""}},created:function(){if(this.$route.query.content){var e=this.$route.query.content;this.deteleId=e.id,this.userName=e.realName,this.WX=e.no,this.qrCode=e.qrImg}else this.userName="",this.WX="",this.qrCode="",this.deteleId=""},methods:{back:function(){this.$router.push("/paymentMethod"),this.$store.commit("changePage","/paymentMethod")},ImgClick:function(){var e,t,s,a,i,n,o=this,c=document.getElementById("fileInput"),d=document.getElementsByClassName("thisImg")[0];e=c.files[0],t=function(e){var t=e;d.src=t,o.qrCode=t},s=new FileReader,a=new Image,i=function(){var e=document.getElementById("canvas");if(!e){var t=document.createElement("canvas");t.setAttribute("id","canvas"),t.setAttribute("style","display:none;"),document.body.appendChild(t),e=document.getElementById("canvas")}return e}(),n=i.getContext("2d"),s.onload=function(){var e=this.result;a.onload=function(){var e=function(e,t,s){var a={},i=0,n=0;return t<=e&&s<=e?a={width:t,height:s}:(t>=s?(i=e,n=Math.ceil(e*s/t)):(n=e,i=Math.ceil(e*t/s)),a={width:i,height:n}),a}(200,this.width,this.height);i.width=e.width,i.height=e.height,n.drawImage(a,0,0,e.width,e.height);var s=i.toDataURL("image/jpeg");n.clearRect(0,0,e.width,e.height),t(s)},a.src=e},s.readAsDataURL(e)},ImgUpload:function(e,t){document.getElementsByClassName("thisImg")[0];var s=document.getElementById("fileInput"),a=document.getElementById("fileInput1");0==t?a.click():1==t&&s.click()},checkSafe:function(){this.sfTestFlag=!1},addWeixin:function(){this.userName?this.WX?this.qrCode?this.sfTestFlag=!0:Object(a.Toast)(this.$t("m.Methods.message3")):Object(a.Toast)(this.$t("m.Methods.message2")):Object(a.Toast)(this.$t("m.Methods.message1"))},SureAddWX:function(){var e=this;this.moneyPwd?this.moneyPwd.length<6?Object(a.Toast)(this.$t("m.Public.message1")):(a.Indicator.open(),""==e.deteleId?e.add():e.$axios.post("/fhPayKind/delete",{userId:e.$store.state.userId,sktSessionId:e.$store.state.sessionId,id:e.deteleId,c2cPwd:this.moneyPwd}).then(function(t){a.Indicator.close(),t.data.ok?e.add():Object(a.Toast)(e.$t("m.Public.pw"))})):Object(a.Toast)(this.$t("m.Public.message"))},add:function(){var e=this;e.$axios.post("/fhPayKind/add",{userId:e.$store.state.userId,sktSessionId:e.$store.state.sessionId,type:"Wechat",no:this.WX,realName:this.userName,qrImgFile:this.qrCode,c2cPwd:this.moneyPwd}).then(function(t){a.Indicator.close(),t.data.ok?(e.sfTestFlag=!1,e.successflag=!0):(e.successflag=!1,Object(a.Toast)(t.data.msg))})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weixin"},[s("div",{staticClass:"heads"},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("m.Methods.wechat")))]),e._v(" "),s("i",{staticClass:"iconfont icon-jiantou_xiangzuo",on:{click:e.back}})]),e._v(" "),s("div",{staticClass:"weixinContent"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.successflag,expression:"!successflag"}],staticStyle:{"background-color":"#0f131c",width:"100%","box-sizing":"border-box",padding:"0.3rem"}},[s("div",{staticClass:"weixinIpt clearfix"},[s("label",{staticClass:"fl"},[e._v(e._s(e.$t("m.Methods.Name")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"fl",attrs:{type:"text",placeholder:e.$t("m.Methods.placeholder1")},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"weixinIpt clearfix"},[s("label",{staticClass:"fl"},[e._v(e._s(e.$t("m.Methods.userName")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.WX,expression:"WX"}],staticClass:"fl",attrs:{type:"text",placeholder:e.$t("m.Methods.placeholder2")},domProps:{value:e.WX},on:{input:function(t){t.target.composing||(e.WX=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"imgCode clearfix"},[s("p",{staticClass:"title fl "},[e._v(e._s(e.$t("m.Methods.CodeTitle")))]),e._v(" "),s("p",{staticClass:"addImg fr clearfix",on:{click:function(t){e.sheetVisible=!0}}},[s("span",[e._v(e._s(e.$t("m.Methods.CodeTitle1")))]),e._v(" "),s("input",{ref:"cameraInput",attrs:{type:"file",accept:"image/*",id:"fileInput"},on:{change:function(t){e.ImgClick()}}})]),e._v(" "),s("p",{staticClass:"imgs fl"},[s("img",{staticClass:"thisImg",attrs:{src:e.qrCode,alt:""}})])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.successflag,expression:"successflag"}],staticClass:"success",staticStyle:{"background-color":"#0f131c",width:"100%","box-sizing":"border-box","padding-top":"0.9rem"}},[e._m(0),e._v(" "),s("p",[e._v(e._s(e.$t("m.Methods.success")))])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.successflag,expression:"!successflag"}],staticClass:"sureBtn",on:{click:e.addWeixin}},[e._v(e._s(e.$t("m.Methods.btn")))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.sfTestFlag,expression:"sfTestFlag"}],staticClass:"safeCover",on:{click:function(t){e.sfTestFlag=!1,e.moneyPwd=""}}}),e._v(" "),s("div",{staticClass:"safeTest",class:{safeTests:e.sfTestFlag}},[s("div",{staticClass:"title clearfix"},[s("span",{staticClass:"fl"},[e._v(e._s(e.$t("m.Public.title")))]),e._v(" "),s("span",{staticClass:"fr",on:{click:function(t){e.sfTestFlag=!1,e.moneyPwd=""}}},[e._v(e._s(e.$t("m.Public.cancel")))])]),e._v(" "),s("div",{staticClass:"box"},[s("p",[e._v(e._s(e.$t("m.Public.sTitle")))]),e._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.moneyPwd,expression:"moneyPwd"}],attrs:{type:"password",placeholder:e.$t("m.Public.placeholder")},domProps:{value:e.moneyPwd},on:{input:function(t){t.target.composing||(e.moneyPwd=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"btnBox"},[s("p",{staticClass:"btn",on:{click:e.SureAddWX}},[e._v(e._s(e.$t("m.Public.btn")))])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("i",{staticClass:"iconfont icon-duihao1"})])}]},o=s("VU/8")(i,n,!1,function(e){s("2sj4"),s("G7tS")},"data-v-a7b81d98",null);t.default=o.exports}});