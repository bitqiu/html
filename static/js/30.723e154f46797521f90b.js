webpackJsonp([30],{"3ZlP":function(t,a){},YMx4:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("mvHQ"),i=s.n(e),o=s("bOdI"),n=s.n(o),l=s("Au9i"),c=s("UO8Z"),r={name:"uOrder",data:function(){var t;return t={wrapperHeight:"",allLoaded:!1,topStatus:"",bottomStatus:"",currentPage:1,appealTotal:5,note:!1,chooseFlag:!1,flag:!1,close:!1,value4:new Date,value5:new Date,starTime:"请选择日期",endTime:"请选择日期",createAtFrom:"",createAtTo:"",buy:!0,buyStatus:null,sellStatus:null,list:[],buyFlag:!1,buyTypeFlag:!1,buyTypes:[{name:"全部",value:null},{name:"成功",value:"Succ"},{name:"失败",value:"Failed"},{name:"处理中",value:"Handling"}],sellTypes:[{name:"全部",value:null},{name:"成功",value:"Succ"},{name:"失败",value:"Failed"},{name:"处理中",value:"Handling"},{name:"待审核",value:"Waiting"},{name:"已驳回",value:"Rejected"},{name:"已打款",value:"Payed"}],dateFlag:!1,type:"全部"},n()(t,"flag",!0),n()(t,"cancelFlag",!1),n()(t,"cancelItem",""),n()(t,"payFlag",!1),n()(t,"payItem",""),t},computed:{userId:function(){return this.$store.state.userId},sessionId:function(){return this.$store.state.sessionId}},created:function(){""!==this.$store.state.fastOrder.buy&&(this.buy=this.$store.state.fastOrder.buy,this.createAtFrom=this.$store.state.fastOrder.createAtFrom,this.createAtTo=this.$store.state.fastOrder.createAtTo,this.type=this.$store.state.fastOrder.type,this.buy?this.buyStatus=this.$store.state.fastOrder.status:this.sellStatus=this.$store.state.fastOrder.status,this.$store.state.fastOrder.buy="",this.$store.state.fastOrder.createAtFrom="",this.$store.state.fastOrder.createAtTo="",this.$store.state.fastOrder.status="",this.$store.state.fastOrder.type=""),this.allData()},mounted:function(){this.wrapperHeight=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top},methods:{chooseBuy:function(t){this.buy=t,this.buyStatus=null,this.sellStatus=null,this.type="全部",this.starTime="请选择日期",this.endTime="请选择日期",this.createAtFrom="",this.createAtTo="",this.buyFlag=!1,this.loadTop()},chooseType:function(t,a){this.type=t.name,a?this.buyStatus=t.value:this.sellStatus=t.value,this.buyTypeFlag=!1,this.loadTop()},chooseDate:function(){this.dateFlag=!1,this.loadTop()},goDetail:function(t){this.buy||(this.flag=!1,this.setSess({ftab:3}),this.$store.state.fastOrder.buy=this.buy,this.$store.state.fastOrder.createAtFrom=this.createAtFrom,this.$store.state.fastOrder.createAtTo=this.createAtTo,this.$store.state.fastOrder.status=this.buy?this.buyStatus:this.sellStatus,this.$store.state.fastOrder.type=this.type,this.setSess({uSellItem:i()(t)}),this.$router.push("/uOrderDetail"))},goPay:function(t){var a=(new Date).getTime();if(parseFloat(a)>=parseFloat(t.expireTime)){var s=this;return setTimeout(function(){s.loadTop()},1e3),void Object(l.Toast)("订单已超时，不能再继续支付")}if(this.setSess({ftab:3}),"http:"==window.location.protocol)var e=t.payUrl.replace("https","http");else e=t.payUrl;window.location.href=e},cancel:function(t){this.cancelItem=t,this.cancelFlag=!0},pay:function(t){this.payItem=t,this.payFlag=!0},sureCancel:function(){var t=this;l.Indicator.open(),t.$axios.post("/fhUPay/cancel",{orderId:t.cancelItem.id,userId:t.userId,sktSessionId:t.sessionId}).then(function(a){l.Indicator.close(),t.cancelFlag=!1,a.data.ok?(t.loadTop(),Object(l.Toast)(a.data.msg)):Object(l.Toast)(a.data.msg)})},surePay:function(){var t=this;l.Indicator.open(),t.$axios.post("/fhUPay/confirmPay",{orderId:t.payItem.id,userId:t.userId,sktSessionId:t.sessionId}).then(function(a){l.Indicator.close(),t.payFlag=!1,a.data.ok?(t.loadTop(),Object(l.Toast)(a.data.msg)):Object(l.Toast)(a.data.msg)})},allData:function(){var t=this;if(this.allLoaded=!1,this.buy)var a="fwUPayIn_list",s=t.buyStatus;else a="fwUPayOut_list",s=t.sellStatus;l.Indicator.open(),t.$store.commit("socketSend",{act:a,data:{pageBean:{pageNo:t.currentPage,pageSize:t.appealTotal,orderField:"id",orderDirection:"desc"},createAtFrom:t.createAtFrom,createAtTo:t.createAtTo,status:s},fn:function(a){l.Indicator.close(),a.ok?(0==a.pageBean.data.length?t.allLoaded=!0:t.list=t.list.concat(a.pageBean.data),t.buy&&t.list.forEach(function(a){if("Handling"==a.status){var s=(new Date).getTime();parseFloat(s)>=parseFloat(a.expireTime)?t.$set(a,"active",!1):t.$set(a,"active",!0)}}),t.list.length>0?t.note=!1:t.note=!0):Object(l.Toast)(a.msg)}})},handleTopChange:function(t){this.topStatus=t},handleBottomChange:function(t){this.bottomStatus=t},loadTop:function(){var t=this;t.note=!1,t.currentPage=1,t.list=[],t.allLoaded=!1,t.allData(),t.flag&&setTimeout(function(){t.$refs.loadmore.onTopLoaded()},1e3)},loadBottom:function(){var t=this;t.currentPage++,t.allLoaded=!1,setTimeout(function(){t.allData(),t.$refs.loadmore.onBottomLoaded()},500)},handleChange:function(t){this.chooseFlag=!0,this.flag=!0,this.starTime=t,this.createAtFrom=Object(c.a)(this.starTime,"yyyy-MM-dd hh:mm:ss"),"请选择日期"==this.endTime?this.createAtTo="":this.createAtTo=Object(c.a)(this.endTime,"yyyy-MM-dd hh:mm:ss")},handleChanges:function(t){this.chooseFlag=!0,this.flag=!0,this.endTime=t,this.createAtTo=Object(c.a)(this.endTime,"yyyy-MM-dd hh:mm:ss"),"请选择日期"==this.starTime?this.createAtFrom="":this.createAtFrom=Object(c.a)(this.starTime,"yyyy-MM-dd hh:mm:ss")},open:function(t){this.$refs[t].open()}}},u={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"uOrder",attrs:{id:"uOrder"}},[s("div",{staticClass:"choose"},[s("div",{staticClass:"chooseCon clearfix"},[t._m(0),t._v(" "),s("div",{staticClass:"con fl cons"},[s("span",{staticClass:"fl tit"},[t._v("状态")]),t._v(" "),s("span",{class:{fl:!0,select:!0,chooseActive:t.buyTypeFlag},on:{click:function(a){t.buyTypeFlag=!t.buyTypeFlag,t.dateFlag=!1,t.buyFlag=!1}}},[s("span",[t._v(t._s(t.type))]),t._v(" "),t.buyTypeFlag?t._e():s("i",{staticClass:"iconfont icon-30jiantouxiangxiafill"}),t._v(" "),t.buyTypeFlag?s("i",{staticClass:"iconfont icon-30jiantouxiangshangfill"}):t._e()])]),t._v(" "),s("div",{staticClass:"date fr",on:{click:function(a){t.dateFlag=!t.dateFlag,t.buyFlag=!1,t.buyTypeFlag=!1}}},[s("i",{staticClass:"iconfont icon-riliriqi2"})])]),t._v(" "),t.buyFlag?s("div",{staticClass:"buyType"},[s("div",{class:{active:t.buy},on:{click:function(a){t.chooseBuy(!0)}}},[t._v("买入")]),t._v(" "),s("div",{class:{active:!t.buy},on:{click:function(a){t.chooseBuy(!1)}}},[t._v("卖出")])]):t._e(),t._v(" "),t.buyTypeFlag?s("div",{staticClass:"buyType"},[t._l(t.buyTypes,function(a,e){return t.buy?s("div",{key:e,class:{active:t.buyStatus==a.value},on:{click:function(s){t.chooseType(a,!0)}}},[t._v(t._s(a.name))]):t._e()}),t._v(" "),t._l(t.sellTypes,function(a,e){return t.buy?t._e():s("div",{key:e,class:{active:t.sellStatus==a.value},on:{click:function(s){t.chooseType(a,!1)}}},[t._v(t._s(a.name))])})],2):t._e(),t._v(" "),t.dateFlag?s("div",{staticClass:"dateCon"},[s("div",{staticClass:"title active"},[t._v("日期选择")]),t._v(" "),s("div",{staticClass:"center"},[s("div",{staticClass:"con clearfix"},[s("span",{staticClass:"fl"},[t._v("开始日期")]),t._v(" "),"请选择日期"!=t.starTime?s("span",{staticClass:"fl time",on:{click:function(a){t.open("picker4")}}},[t._v(t._s(t._f("formatDates")(t.starTime)))]):t._e(),t._v(" "),"请选择日期"==t.starTime?s("span",{staticClass:"fl time",on:{click:function(a){t.open("picker4")}}},[t._v(t._s(t.starTime))]):t._e(),t._v(" "),s("i",{staticClass:"fr iconfont icon-error",on:{click:function(a){t.starTime="请选择日期",t.createAtFrom=""}}})]),t._v(" "),s("div",{staticClass:"con clearfix"},[s("span",{staticClass:"fl"},[t._v("结束日期")]),t._v(" "),"请选择日期"!=t.endTime?s("span",{staticClass:"fl time",on:{click:function(a){t.open("picker5")}}},[t._v(t._s(t._f("formatDates")(t.endTime)))]):t._e(),t._v(" "),"请选择日期"==t.endTime?s("span",{staticClass:"fl time",on:{click:function(a){t.open("picker5")}}},[t._v(t._s(t.endTime))]):t._e(),t._v(" "),s("i",{staticClass:"fr iconfont icon-error",on:{click:function(a){t.endTime="请选择日期",t.createAtTo=""}}})]),t._v(" "),s("div",{staticClass:"btn"},[s("button",{on:{click:t.chooseDate}},[t._v("确定")])])])]):t._e()]),t._v(" "),s("div",{staticClass:"uOrderCon"},[s("div",{ref:"wrapper",staticClass:"page-loadmore-wrapper",style:{height:t.wrapperHeight+"px"}},[s("mt-loadmore",{ref:"loadmore",staticStyle:{marginBottom:"0.5rem"},attrs:{"bottom-method":t.loadBottom,"auto-fill":!1,"bottom-all-loaded":t.allLoaded,"top-method":t.loadTop},on:{"bottom-status-change":t.handleBottomChange,"top-status-change":t.handleTopChange}},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length>0"}],staticClass:"recordBox"},t._l(t.list,function(a,e){return s("li",{key:e,on:{click:function(s){t.goDetail(a)}}},[s("div",{staticClass:"title clearfix"},[s("span",{staticClass:"fl"},[s("strong",[t._v("订单号:"+t._s(a.id))])]),t._v(" "),t.buy?s("span",{class:{fr:!0,rcolor:"Failed"==a.status,gcolor:"Succ"==a.status}},[s("strong",[t._v(t._s("Handling"==a.status?"处理中":"Succ"==a.status?"成功":"失败"))])]):t._e(),t._v(" "),t.buy?t._e():s("span",{class:{fr:!0,rcolor:"Failed"==a.status,gcolor:"Succ"==a.status}},[s("strong",[t._v(t._s("Handling"==a.status?"处理中":"Succ"==a.status?"成功":"Waiting"==a.status?"待审核":"Failed"==a.status?"失败":"Payed"==a.status?"已打款":"已驳回"))])])]),t._v(" "),s("div",{staticClass:"con clearfix one"},[s("span",{staticClass:"fl tit"},[t._v("类型")]),s("span",{staticClass:"fr"},[s("i",{class:{buy:t.buy,sell:!t.buy}},[t._v(t._s(t.buy?"买入":"卖出"))]),t._v(" "+t._s(t._f("moneyFil")(a.amount))+" USDT")])]),t._v(" "),a.price?s("div",{staticClass:"con clearfix"},[s("span",{staticClass:"fl tit"},[t._v("单价")]),s("span",{staticClass:"fr price"},[t._v(t._s(t._f("moneyFil")(a.price)))])]):t._e(),t._v(" "),a.msg?s("div",{staticClass:"con clearfix"},[s("span",{staticClass:"fl tit"},[t._v("备注")]),s("span",{staticClass:"fr note"},[t._v(t._s(a.msg))])]):t._e(),t._v(" "),s("div",{staticClass:"con clearfix"},[s("span",{staticClass:"fl tit"},[t._v("日期")]),s("span",{staticClass:"fr"},[t._v(t._s(a.createAt))])]),t._v(" "),a.buyType?s("div",{staticClass:"con btns clearfix"},["Handling"==a.status?s("button",{class:{fl:!0,buyActive:!a.active},on:{click:function(s){t.cancel(a)}}},[t._v("取消")]):t._e(),t._v(" "),"Handling"==a.status&&a.active?s("button",{staticClass:"fl go",on:{click:function(s){t.goPay(a)}}},[t._v("继续支付")]):t._e(),t._v(" "),"Handling"==a.status?s("button",{class:{fl:!0,go:!0,buyActive:!a.active},on:{click:function(s){t.pay(a)}}},[t._v("确认已付款")]):t._e(),t._v(" "),"Failed"==a.status?s("button",{class:{fl:!0,go:!0,failed:"Failed"==a.status},on:{click:function(s){t.pay(a)}}},[t._v("确认已付款")]):t._e()]):t._e()])})),t._v(" "),t.allLoaded?s("div",{staticClass:"noThing"},[s("span",[t._v("没有更多的数据了")])]):t._e(),t._v(" "),s("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.bottomStatus,expression:"bottomStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.bottomStatus}},[t._v("↑")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[s("mt-spinner",{attrs:{type:"snake"}})],1)]),t._v(" "),s("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.topStatus,expression:"topStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.topStatus}},[t._v("↓")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.topStatus,expression:"topStatus === 'loading'"}]},[s("mt-spinner",{attrs:{type:"snake"}})],1)])])],1)]),t._v(" "),s("mt-popup",{attrs:{"popup-transition":"popup-fade",closeOnClickModal:t.close},model:{value:t.cancelFlag,callback:function(a){t.cancelFlag=a},expression:"cancelFlag"}},[s("div",{staticClass:"cancelCon "},[s("p",{staticClass:"title"},[t._v("温馨提示")]),t._v(" "),s("p",{staticClass:"con"},[t._v("请确定您没有向对方打款，确定要取消吗？")]),t._v(" "),s("div",{staticClass:"btns clearfix"},[s("button",{staticClass:"fl",on:{click:function(a){t.cancelFlag=!1}}},[t._v("取消")]),s("button",{staticClass:"sure fr",on:{click:function(a){t.debounce(t.sureCancel,300)}}},[t._v("确定")])])])]),t._v(" "),s("mt-popup",{attrs:{"popup-transition":"popup-fade",closeOnClickModal:t.close},model:{value:t.payFlag,callback:function(a){t.payFlag=a},expression:"payFlag"}},[s("div",{staticClass:"cancelCon payCon"},[s("p",{staticClass:"title"},[t._v("温馨提示")]),t._v(" "),s("p",{staticClass:"con"},[t._v("请确定您已经向对方打款，如恶意点击将冻结该账户！")]),t._v(" "),s("div",{staticClass:"btns clearfix"},[s("button",{staticClass:"fl",on:{click:function(a){t.payFlag=!1}}},[t._v("取消")]),s("button",{staticClass:"sure fr",on:{click:function(a){t.debounce(t.surePay,300)}}},[t._v("确定")])])])]),t._v(" "),s("mt-datetime-picker",{ref:"picker4",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:t.handleChange},model:{value:t.value4,callback:function(a){t.value4=a},expression:"value4"}}),t._v(" "),s("mt-datetime-picker",{ref:"picker5",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:t.handleChanges},model:{value:t.value5,callback:function(a){t.value5=a},expression:"value5"}})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"con fl"},[a("span",{staticClass:"fl  tit"},[this._v("类型 :   买入")])])}]},d=s("VU/8")(r,u,!1,function(t){s("rMby"),s("3ZlP")},"data-v-41172ddb",null);a.default=d.exports},rMby:function(t,a){}});